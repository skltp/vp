apiVersion: v1
kind: ConfigMap
metadata:
  name: vp-configmap-default
data:
  BASE_PATH: {{ tpl .Values.paths.base . }}
  DATA_PATH: {{ tpl .Values.paths.data . }}
  CONFIGURATION_VERSION_FILE: {{ tpl .Values.paths.config . }}/config.version
  DEFAULTROUTING_ALLOWEDCONTRACTS: urn:riv:ehr:accesscontrol:AssertCareEngagementResponder:1,urn:riv:insuranceprocess:healthreporting:ReceiveMedicalCertificateQuestionResponder:1,urn:riv:insuranceprocess:healthreporting:ReceiveMedicalCertificateAnswerResponder:1
  HEADERS_REG_EXP_REQUESTHEADERSTOREMOVE: (?i)x-vp.*|PEER_CERTIFICATES|X-Forwarded.*|MULE_.*|X-MULE_.*|Connection|accept-encoding|X-Forwarded-Tls-Client-Cert
  HSA_FILES: {{ tpl .Values.paths.config . }}/hsacachecomplementary.xml,{{ tpl .Values.paths.hsafiles . }}/hsacache.xml
  IP_WHITELIST: 127.0.0.1,10.
  HTTP_FORWARDED_HEADER_AUTH_CERT: X-Forwarded-Tls-Client-Cert
  MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE: health, metrics, prometheus
  MANAGEMENT_ENDPOINT_PROMETHEUS_ENABLED: "true"
  MEMORY_LOGGER_PERIOD_SECONDS: "1800"
  PRODUCER_HTTP_KEEPALIVE: "true"
  PRODUCER_HTTP_WORKERS: "0"
  PRODUCER_HTTPS_KEEPALIVE: "true"
  PRODUCER_HTTPS_WORKERS: "0"
  PROPAGATE_CORRELATION_ID_FOR_HTTPS: "true"
  SENDER_ID_ALLOWED_LIST: TSTNMT2321000156-B02
  SERVER_FORWARDHEADERSSTRATEGY: NONE
  SERVER_PORT: "8089"
  SERVER_UNDERTOW_ACCESSLOG_DIR: {{ tpl .Values.paths.log . }}
  SERVER_UNDERTOW_ACCESSLOG_ENABLED: "false"
  SERVER_UNDERTOW_ACCESSLOG_PATTERN: common
  SERVER_UNDERTOW_ACCESSLOG_PREFIX: access_log
  SERVER_UNDERTOW_ACCESSLOG_ROTATE: "true"
  SERVER_UNDERTOW_ACCESSLOG_SUFFIX: .log
  TAKCACHE_ENDPOINT_ADDRESS: http://tak-services-svc:8080/tak-services/SokVagvalsInfo/v2
  TAKCACHE_PERSISTENT_FILE_NAME: {{ tpl .Values.paths.data . }}/localCache
  THROW_VP013_WHEN_ORIGINALCONSUMER_NOT_ALLOWED: "false"
  TIMEOUT_JSON_FILE: {{ tpl .Values.paths.config . }}/timeoutconfig.json
  TIMEOUT_JSON_FILE_DEFAULT_TJANSTEKONTRAKT_NAME: default_timeouts
  VAGVALROUTER_DEFAULT_ROUTING_ADDRESS_DELIMITER: '#'
  MESSAGE_LOGGER_METHOD: ecs
  VP_HOST: 0.0.0.0
  VP_HSA_RESET_CACHE_URL: http://${vp.host}:24000/resethsacache
  VP_HTTP_ROUTE_URL: http://${vp.host}:8080/vp
  VP_HTTPS_ROUTE_URL: https://${vp.host}:20000/vp
  VP_INSTANCE_ID: {{ .Values.skltp.instanceId }}
  VP_INSTANCE_NAME: SKLTP-DEFAULT
  VP_MAX_RECEIVE_LENGTH: "52428800"
  VP_RESET_CACHE_URL: http://${vp.host}:23000/resetcache
  VP_STATUS_URL: http://${vp.host}:8080/status
  VP_USE_ROUTING_HISTORY: "true"
  WSDL_JSON_FILE: {{ tpl .Values.paths.config . }}/wsdlconfig.json
  WSDLFILES_DIRECTORY: {{ tpl .Values.paths.base . }}/wsdl/
  JAVA_OPTS:  -Dlog4j2.formatMsgNoLookups=true
              -Dfile.encoding=UTF-8
              -Duser.country=SE
              -Duser.language=sv
              -Dspring.profiles.active=custom
              -Xms512m -XX:MaxDirectMemorySize=4096m
              -Dlog4j.configurationFile=file://{{ tpl .Values.paths.config . }}/log4j2.xml
              -Dcom.sun.management.jmxremote
              -Dcom.sun.management.jmxremote.port=8084
              -Dcom.sun.management.jmxremote.rmi.port=8084
              -Dcom.sun.management.jmxremote.local.only=false
              -Dcom.sun.management.jmxremote.authenticate=false
              -Dcom.sun.management.jmxremote.ssl=false

  TP_TLS_ALLOWEDINCOMINGCIPHERSUITES: '*'
  TP_TLS_ALLOWEDINCOMINGPROTOCOLS: TLSv1.2
  TP_TLS_ALLOWEDOUTGOINGPROTOCOLS: TLSv1.2
  TP_TLS_STORE_CONSUMER_FILE: function_cert.p12
  TP_TLS_STORE_CONSUMER_TYPE: PKCS12
  TP_TLS_STORE_LOCATION: file://{{ tpl .Values.paths.base . }}/certs/
  TP_TLS_STORE_PRODUCER_FILE: function_cert.p12
  TP_TLS_STORE_PRODUCER_TYPE: PKCS12
  TP_TLS_STORE_TRUSTSTORE_FILE: truststore.p12
  TP_TLS_STORE_TRUSTSTORE_PASSWORD: password
  TP_TLS_STORE_TRUSTSTORE_TYPE: PKCS12
  TP_TLS_ALLOWEDOUTGOINGCIPHERSUITES: >-
    TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256,TLS_DHE_RSA_WITH_AES_256_GCM_SHA384,TLS_DHE_DSS_WITH_AES_256_GCM_SHA384,TLS_DHE_RSA_WITH_AES_128_GCM_SHA256,TLS_DHE_DSS_WITH_AES_128_GCM_SHA256,TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384,TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384,TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256,TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256,TLS_DHE_RSA_WITH_AES_256_CBC_SHA256,TLS_DHE_DSS_WITH_AES_256_CBC_SHA256,TLS_DHE_RSA_WITH_AES_128_CBC_SHA256,TLS_DHE_DSS_WITH_AES_128_CBC_SHA256,TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384,TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384,TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256,TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256,TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA,TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA,TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA,TLS_DHE_DSS_WITH_AES_256_CBC_SHA,TLS_DHE_RSA_WITH_AES_256_CBC_SHA,TLS_DHE_RSA_WITH_AES_128_CBC_SHA,TLS_DHE_DSS_WITH_AES_128_CBC_SHA,TLS_ECDH_RSA_WITH_AES_256_CBC_SHA,TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA,TLS_ECDH_RSA_WITH_AES_128_CBC_SHA